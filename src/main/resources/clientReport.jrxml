<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.17.0.final using JasperReports Library version 6.17.0-6d93193241dd8cc42629e188b94f9e0bc5722efd  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Rapport_Balayage" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="fe2c79fe-243f-4ad1-b3cf-8e2fbfdc5ea4">
    <property name="com.jaspersoft.studio.data.sql.tables" value=""/>
    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="One Empty Record"/>
    <style name="Table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <leftPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
            <rightPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="Table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <leftPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
            <rightPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="Table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <leftPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
            <rightPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="Table 1_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <leftPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
            <rightPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="Table 1_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <leftPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
            <rightPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="Table 1_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <leftPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
            <rightPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <subDataset name="ClientDataSet" uuid="8851d34a-4370-4ed5-8a70-0e1fae9318cd">
        <queryString>
            <![CDATA[]]>
        </queryString>
        <field name="id" class="java.lang.Long"/>
        <field name="nationalite" class="java.lang.String"/>
        <field name="age" class="java.lang.Integer"/>
        <field name="revenus" class="java.lang.Double"/>
        <field name="numTestRate" class="java.lang.Integer"/>
    </subDataset>
    <subDataset name="StatsRegleDataSet" uuid="ac90ea90-c198-4832-984f-e11509730f69">
        <queryString>
            <![CDATA[]]>
        </queryString>
        <field name="id" class="java.lang.Integer"/>
        <field name="triggerNumber" class="java.lang.Integer"/>
        <field name="exceptionsTriggeredNumber" class="java.lang.Integer"/>
    </subDataset>
    <subDataset name="ExceptionDataSet" uuid="e99d937d-5311-4003-8ec3-eeed766d440b">
        <queryString>
            <![CDATA[]]>
        </queryString>
        <field name="type" class="java.lang.String"/>
        <field name="message" class="java.lang.String"/>
        <field name="nombreOccurences" class="java.lang.Integer"/>
        <field name="reglesConcernees" class="java.lang.String"/>
        <field name="idsClientsConcernees" class="java.lang.String"/>
    </subDataset>
    <subDataset name="statsReglesDataSet1" uuid="1f19f78f-8864-4b1e-8911-6e123bde090c">
        <queryString>
            <![CDATA[]]>
        </queryString>
        <field name="id" class="java.lang.Integer"/>
        <field name="triggerNumber" class="java.lang.Integer"/>
        <field name="exceptionsTriggeredNumber" class="java.lang.Integer"/>
    </subDataset>
    <subDataset name="statsReglesDataSet2" uuid="b94d5bff-ce99-44e6-9126-55865bb3808b">
        <queryString>
            <![CDATA[]]>
        </queryString>
        <field name="id" class="java.lang.Integer"/>
        <field name="triggerNumber" class="java.lang.Integer"/>
        <field name="exceptionsTriggeredNumber" class="java.lang.Integer"/>
    </subDataset>
    <parameter name="REPORT_TITLE" class="java.lang.String"/>
    <parameter name="STATS" class="java.lang.String"/>
    <parameter name="clientDataSource" class="net.sf.jasperreports.engine.data.JRBeanCollectionDataSource"/>
    <parameter name="statsReglesDataSource" class="net.sf.jasperreports.engine.data.JRBeanCollectionDataSource">
        <parameterDescription><![CDATA[statsRegleDatasource]]></parameterDescription>
    </parameter>
    <parameter name="exceptionDataSource" class="net.sf.jasperreports.engine.data.JRBeanCollectionDataSource"/>
    <parameter name="statsReglesDataSource1" class="net.sf.jasperreports.engine.data.JRBeanCollectionDataSource">
        <parameterDescription><![CDATA[statsRegleDatasource]]></parameterDescription>
    </parameter>
    <parameter name="statsReglesDataSource2" class="net.sf.jasperreports.engine.data.JRBeanCollectionDataSource">
        <parameterDescription><![CDATA[statsRegleDatasource]]></parameterDescription>
    </parameter>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="80" splitType="Stretch">
            <staticText>
                <reportElement x="-11" y="0" width="833" height="79" backcolor="#D9E7F2" uuid="eafbdd95-a669-487f-9438-197da529b35e">
                    <property name="com.jaspersoft.studio.unit.width" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.x" value="pixel"/>
                    <printWhenExpression><![CDATA[$V{PAGE_NUMBER}==1]]></printWhenExpression>
                </reportElement>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="22"/>
                </textElement>
                <text><![CDATA[]]></text>
            </staticText>
            <textField textAdjust="ScaleFont" evaluationTime="Report">
                <reportElement x="260" y="10" width="270" height="40" forecolor="#2EAAC9" uuid="8d8cf20b-5ca3-41a5-9593-c14f271f9be6"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="18" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{REPORT_TITLE}]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <pageHeader>
        <band height="164" splitType="Stretch">
            <printWhenExpression><![CDATA[$V{PAGE_NUMBER}==1]]></printWhenExpression>
            <textField>
                <reportElement x="140" y="20" width="310" height="90" uuid="cd2c0718-e5b8-467e-b764-4f9427cbe812"/>
                <textElement textAlignment="Center" verticalAlignment="Top"/>
                <textFieldExpression><![CDATA[$P{STATS}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="20" width="130" height="90" forecolor="#2EAAC9" uuid="c4379148-4ef1-42ff-b80d-b24dc90474b1"/>
                <textElement verticalAlignment="Top">
                    <font size="12"/>
                </textElement>
                <text><![CDATA[Statistiques globales du balayage:]]></text>
            </staticText>
            <componentElement>
                <reportElement stretchType="ContainerHeight" x="480" y="20" width="300" height="90" uuid="00b73dba-d7be-44e1-b84b-157b7b946937">
                    <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
                    <property name="com.jaspersoft.studio.table.style.table_header" value="Table 1_TH"/>
                    <property name="com.jaspersoft.studio.table.style.column_header" value="Table 1_CH"/>
                    <property name="com.jaspersoft.studio.table.style.detail" value="Table 1_TD"/>
                    <property name="com.jaspersoft.studio.unit.height" value="pixel"/>
                </reportElement>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="StatsRegleDataSet" uuid="ec517670-ecbb-4e95-8aeb-4581ffc578b4">
                        <dataSourceExpression><![CDATA[$P{statsReglesDataSource}]]></dataSourceExpression>
                    </datasetRun>
                    <jr:column width="50" uuid="a5064f51-7141-44f3-91b7-16d70b7a1c9e">
                        <property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
                        <jr:columnHeader style="Table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement x="0" y="0" width="50" height="30" uuid="571b557a-52a9-4107-9bed-0e81325cb3d6"/>
                                <textElement textAlignment="Center"/>
                                <text><![CDATA[Numéro Règle]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="Table 1_TD" height="20">
                            <textField>
                                <reportElement x="0" y="0" width="50" height="20" uuid="84c278a0-d786-4b9c-aed6-3085cd074180"/>
                                <textElement textAlignment="Center"/>
                                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="130" uuid="306c8dbc-c36a-433d-ae3c-e32c6636af4e">
                        <property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
                        <jr:columnHeader style="Table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement key="" x="0" y="0" width="130" height="30" uuid="631c4736-7557-4ebe-9906-e2a6525576c1"/>
                                <textElement textAlignment="Center"/>
                                <text><![CDATA[Nombre de declenchements]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="Table 1_TD" height="20">
                            <textField>
                                <reportElement x="0" y="0" width="130" height="20" uuid="39c02652-6ab1-4306-9dc6-af05f7c72248"/>
                                <textElement textAlignment="Center"/>
                                <textFieldExpression><![CDATA[$F{triggerNumber}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="120" uuid="ea5f41cb-223f-404d-a381-6fd911fff0b1">
                        <property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
                        <jr:columnHeader style="Table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement key="" x="0" y="0" width="120" height="30" uuid="e0ea0b5b-f13b-4a7a-beba-9f806f238a47"/>
                                <textElement textAlignment="Center"/>
                                <text><![CDATA[Nombre d'exceptions provoquées]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="Table 1_TD" height="20">
                            <textField>
                                <reportElement x="0" y="0" width="120" height="20" uuid="f304f27b-4f11-45b0-9cbf-624825db1721"/>
                                <textElement textAlignment="Center"/>
                                <textFieldExpression><![CDATA[$F{exceptionsTriggeredNumber}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </pageHeader>
    <detail>
        <band height="170">
            <componentElement>
                <reportElement stretchType="ContainerHeight" x="-20" y="20" width="840" height="140" uuid="f1591c40-8e60-484c-9c81-0dec6c2a54ea">
                    <property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
                    <property name="com.jaspersoft.studio.table.style.table_header" value="Table 1_TH"/>
                    <property name="com.jaspersoft.studio.table.style.column_header" value="Table 1_CH"/>
                    <property name="com.jaspersoft.studio.table.style.detail" value="Table 1_TD"/>
                    <property name="com.jaspersoft.studio.unit.height" value="pixel"/>
                    <property name="com.jaspersoft.studio.components.autoresize.next" value="true"/>
                </reportElement>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="ExceptionDataSet" uuid="8d8c9dc1-5297-4053-9345-84cc98ad69d0">
                        <dataSourceExpression><![CDATA[$P{exceptionDataSource}]]></dataSourceExpression>
                    </datasetRun>
                    <jr:column width="110" uuid="32e95aa7-2d42-43f2-aeea-a36de9f981b7">
                        <property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
                        <jr:columnHeader style="Table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement x="0" y="0" width="110" height="30" uuid="14f3131c-6edf-4e07-95c1-cd5054ed0e54"/>
                                <textElement textAlignment="Center"/>
                                <text><![CDATA[Type d'exception]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="Table 1_TD" height="20">
                            <textField>
                                <reportElement x="0" y="0" width="110" height="20" uuid="3ed50af6-fa0a-43a8-81ff-82c77943a375"/>
                                <textFieldExpression><![CDATA[$F{type}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="450" uuid="88d0360e-6fbf-48d4-a2e8-a9b76e57bb6e">
                        <property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
                        <jr:columnHeader style="Table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement key="" x="0" y="0" width="450" height="30" uuid="e9f9411e-dff5-42ef-a2f6-89db684bfca0"/>
                                <textElement textAlignment="Center"/>
                                <text><![CDATA[exception (message)]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="Table 1_TD" height="20">
                            <textField>
                                <reportElement x="0" y="0" width="450" height="20" uuid="f71adf85-7c02-4cda-b5ff-0a8030a227f3"/>
                                <textFieldExpression><![CDATA[$F{message}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="40" uuid="3ddfc3ec-0ad2-48df-a4e6-f56ebcb623ca">
                        <property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
                        <jr:columnHeader style="Table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement key="" x="0" y="0" width="40" height="30" uuid="203d6ff6-2197-4314-9b00-7b327eddec6e"/>
                                <textElement textAlignment="Center"/>
                                <text><![CDATA[Nombre d'occurence]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="Table 1_TD" height="20">
                            <textField>
                                <reportElement x="0" y="0" width="40" height="20" uuid="d1d3a741-8930-4a35-bd4d-d71b42eac3b5"/>
                                <textFieldExpression><![CDATA[$F{nombreOccurences}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="50" uuid="4a87b36f-12d2-47af-9a0b-675ce0ee6504">
                        <property name="com.jaspersoft.studio.components.table.model.column.name" value="Column4"/>
                        <jr:columnHeader style="Table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement key="" x="0" y="0" width="50" height="30" uuid="95b8d33e-03f9-45e0-b219-a682f1cd48ab"/>
                                <textElement textAlignment="Center"/>
                                <text><![CDATA[Règles concernées]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="Table 1_TD" height="20">
                            <textField>
                                <reportElement x="0" y="0" width="50" height="20" uuid="32a55d84-48f5-41d6-8242-dfec4e1ab23a"/>
                                <textFieldExpression><![CDATA[$F{reglesConcernees}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="190" uuid="c7e1f55c-2d31-4b23-9fd6-9994eea57b41">
                        <property name="com.jaspersoft.studio.components.table.model.column.name" value="Column5"/>
                        <jr:columnHeader style="Table 1_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement x="0" y="0" width="190" height="30" uuid="50d34161-079d-481a-9e76-e9a8bb9864c9"/>
                                <textElement textAlignment="Center" verticalAlignment="Top"/>
                                <text><![CDATA[Clients Concernés]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="Table 1_TD" height="20">
                            <textField textAdjust="StretchHeight">
                                <reportElement stretchType="ElementGroupHeight" x="0" y="0" width="190" height="20" uuid="e51fcc7e-6567-4866-a0a4-06f821f5ad79"/>
                                <textFieldExpression><![CDATA[$F{idsClientsConcernees}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
        <band height="271" splitType="Stretch">
            <pieChart>
                <chart evaluationTime="Report">
                    <reportElement key="" x="30" y="1" width="330" height="265" uuid="3a1570a3-a59f-40e5-911e-ef32bad6152e"/>
                    <chartTitle>
                        <titleExpression><![CDATA["Nombre de suspect identifié par règle"]]></titleExpression>
                    </chartTitle>
                    <chartSubtitle/>
                    <chartLegend/>
                </chart>
                <pieDataset minPercentage="5.0">
                    <dataset resetType="Report">
                        <datasetRun subDataset="statsReglesDataSet1" uuid="33850163-8680-4aac-83ab-f30dca181782">
                            <dataSourceExpression><![CDATA[$P{statsReglesDataSource1}]]></dataSourceExpression>
                        </datasetRun>
                    </dataset>
                    <keyExpression><![CDATA["Regle" + $F{id}]]></keyExpression>
                    <valueExpression><![CDATA[$F{triggerNumber}]]></valueExpression>
                </pieDataset>
                <piePlot isShowLabels="true" isCircular="true" labelFormat="{1} ({2})" legendLabelFormat="{0}">
                    <plot/>
                    <itemLabel/>
                </piePlot>
            </pieChart>
            <pieChart>
                <chart evaluationTime="Report">
                    <reportElement key="" x="360" y="0" width="330" height="265" uuid="6680a4ee-a04c-406a-ab7d-ebadac7edbb9"/>
                    <chartTitle>
                        <titleExpression><![CDATA["Nombre d'exceptions denclenchées par règle"]]></titleExpression>
                    </chartTitle>
                    <chartSubtitle/>
                    <chartLegend/>
                </chart>
                <pieDataset minPercentage="5.0">
                    <dataset resetType="Report">
                        <datasetRun subDataset="statsReglesDataSet2" uuid="b261f175-4773-403f-b609-06dda4f4280c">
                            <dataSourceExpression><![CDATA[$P{statsReglesDataSource2}]]></dataSourceExpression>
                        </datasetRun>
                    </dataset>
                    <keyExpression><![CDATA["Règle " + $F{id}]]></keyExpression>
                    <valueExpression><![CDATA[$F{exceptionsTriggeredNumber}]]></valueExpression>
                </pieDataset>
                <piePlot isShowLabels="true" isCircular="true" labelFormat="{1} ({2})" legendLabelFormat="{0}">
                    <plot/>
                    <itemLabel/>
                </piePlot>
            </pieChart>
        </band>
    </detail>
</jasperReport>
